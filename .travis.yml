language: objective-c
osx_image: xcode10.2
xcode_workspace: TheMessagesApp.xcworkspace
xcode_scheme: TheMessagesApp
xcode_destination: platform=iOS Simulator,OS=12.0,name=iPhone SE
before_cache:
- brew cleanup
cache:
  directories:
  - src/Pods
  - "$HOME/Library/Caches/Homebrew"
before_install:
- cd src
- curl -o TheMessagesApp/GoogleService-Info.plist -X GET "https://firebasestorage.googleapis.com/v0/b/messages-3d119.appspot.com/o/app-config%2FGoogleService-Info.plist?alt=media&token=${FIREBASE_CONFIG_FILE_TOKEN}"
- gem install cocoapods --pre
- pod repo update
- brew install xcodegen
- bundle install
- xcodegen
- pod install

notifications:
  slack:
    on_success: always
    on_failure: always
    secure: OgWclqtFyaSCmCzVJGmVMWYocDj9/9JOFqyBzTcOczA0SxVVIisD3Em3i+C/k9LSafQdIK1HxwdhThgQyDHGlAsrRxnFNBdbW2mvbe8lXAYJOoBXjZrUfzBIstWxNpkP39ENv5VgKiYUGWDkv97PgE5Cv4EPdf2AYQsUij6K97/5725EUhTKbyrroC5xw+GHXTi8KpU6Ur6PZ63Qu1ez3fbalL8/+FC3GgkgGYIt4VuP55Cftn5lrC9YOF3bVB4tWHcZrga3z/auEzJRKQvaDTANMbQm5ipu/9Uje14CXGeeMlmxDuexixQve3ae7SuPfTOkIe7WOSWPEoQPq/meXlF2lWt06YfFbQFTemk6L5ZsIybAzuA1ZbrKglB1NXlMmCT4VJ1Zk//zK8yMlrOjrqslpKXjRUzT6Ss1ro+tnqqxpJJnrHBRfdGFZA6B7/Y1puCRbadmA7tIG4j9fLOSmdKvNHtnPHwBEEjoVcoG0cmKdbOTONrwrsKKvizcftAU/5Vu/zU+no/dhRkXvZCThUtG8CYbAAY99GeWH9OsWribpHBOFAN5eH7vbfjFOWtFHH3RET7HGLbirdkBKrQs/ZNHQhB2f6JG5t0wH2wygxYGVXM3nqMMLVXj8ftkMIKSofgA5iX684AvTu2eIvV76JgWHuXsPVEAQFVmWL9gbOI=
